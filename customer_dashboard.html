{% extends "dashboard/base.html" %}

{% block title %}Customer Dashboard{% endblock %}
{% block user_role %}Customer{% endblock %}
{% block user_name %}{{ customer.full_name }}{% endblock %}
{% block user_email %}{{ customer.email }}{% endblock %}
{% block user_id %}{{ customer.id }}{% endblock %}
{% block user_short_name %}{{ customer.full_name.split(' ')[0] }}{% endblock %}
{% block page_title %}Customer Dashboard{% endblock %}

{% block sidebar_menu %}
<li><a href="#" class="active"><i class="fas fa-home"></i> Dashboard</a></li>
<li><a href="#"><i class="fas fa-user"></i> Profile</a></li>
<li><a href="#"><i class="fas fa-briefcase"></i> My Projects</a></li>
<li><a href="#"><i class="fas fa-search"></i> Find Labourers</a></li>
<li><a href="#"><i class="fas fa-search"></i> Find Contractors</a></li>
<li><a href="#"><i class="fas fa-comments"></i> Messages <span class="badge">5</span></a></li>
<li><a href="#"><i class="fas fa-file-invoice-dollar"></i> Payments</a></li>
<li><a href="#"><i class="fas fa-star"></i> Reviews</a></li>
<li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
{% endblock %}

{% block content %}
<!-- Stats Cards -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-briefcase"></i>
        </div>
        <div class="stat-info">
            <h3>Active Projects</h3>
            <p class="stat-number">{{ stats.active_projects }}</p>
            <p class="stat-change">+1 this week</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-info">
            <h3>Completed Projects</h3>
            <p class="stat-number">{{ stats.completed_projects }}</p>
            <p class="stat-change">Total value: ₹{{ stats.total_spent|int }}</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-users"></i>
        </div>
        <div class="stat-info">
            <h3>Active Workers</h3>
            <p class="stat-number">{{ stats.active_workers }}</p>
            <p class="stat-change">4 labourers, 2 contractors</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-rupee-sign"></i>
        </div>
        <div class="stat-info">
            <h3>Total Spent</h3>
            <p class="stat-number">₹{{ stats.total_spent|int }}</p>
            <p class="stat-change">+₹25,000 this month</p>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
    <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
    <div class="actions-grid">
        <button class="action-btn">
            <i class="fas fa-plus-circle"></i>
            <span>Post New Project</span>
        </button>
        <button class="action-btn">
            <i class="fas fa-search"></i>
            <span>Find Labourers</span>
        </button>
        <button class="action-btn">
            <i class="fas fa-search"></i>
            <span>Find Contractors</span>
        </button>
        <button class="action-btn">
            <i class="fas fa-comments"></i>
            <span>View Messages</span>
        </button>
        <button class="action-btn">
            <i class="fas fa-file-invoice"></i>
            <span>Make Payment</span>
        </button>
        <button class="action-btn">
            <i class="fas fa-star"></i>
            <span>Write Review</span>
        </button>
    </div>
</div>

<div class="dashboard-grid">
    <!-- Active Projects -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3><i class="fas fa-briefcase"></i> Active Projects</h3>
            <a href="#" class="view-all">View All</a>
        </div>
        <div class="card-body">
            <div class="project-list">
                <div class="project-item">
                    <div class="project-info">
                        <h4>Home Renovation</h4>
                        <p class="project-meta">Contractor: BuildRight Constructions</p>
                        <p class="project-meta">Budget: ₹1,50,000 | Timeline: 45 days</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 65%"></div>
                        </div>
                        <p class="progress-text">65% Complete</p>
                    </div>
                    <div class="project-actions">
                        <button class="btn-sm"><i class="fas fa-eye"></i> View</button>
                        <button class="btn-sm"><i class="fas fa-comment"></i> Chat</button>
                    </div>
                </div>

                <div class="project-item">
                    <div class="project-info">
                        <h4>Garden Landscaping</h4>
                        <p class="project-meta">Labourer Team: Green Thumb Gardeners</p>
                        <p class="project-meta">Budget: ₹75,000 | Timeline: 30 days</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 30%"></div>
                        </div>
                        <p class="progress-text">30% Complete</p>
                    </div>
                    <div class="project-actions">
                        <button class="btn-sm"><i class="fas fa-eye"></i> View</button>
                        <button class="btn-sm"><i class="fas fa-comment"></i> Chat</button>
                    </div>
                </div>

                <div class="project-item">
                    <div class="project-info">
                        <h4>Plumbing Work</h4>
                        <p class="project-meta">Contractor: WaterFlow Solutions</p>
                        <p class="project-meta">Budget: ₹25,000 | Timeline: 7 days</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 90%"></div>
                        </div>
                        <p class="progress-text">90% Complete</p>
                    </div>
                    <div class="project-actions">
                        <button class="btn-sm"><i class="fas fa-eye"></i> View</button>
                        <button class="btn-sm"><i class="fas fa-comment"></i> Chat</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Messages -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3><i class="fas fa-comments"></i> Recent Messages</h3>
            <a href="#" class="view-all">View All</a>
        </div>
        <div class="card-body">
            <div class="message-list">
                <div class="message-item unread">
                    <div class="message-avatar">
                        <i class="fas fa-user-hard-hat"></i>
                    </div>
                    <div class="message-content">
                        <h4>Rajesh Kumar (Contractor)</h4>
                        <p>We'll start the painting work tomorrow at 9 AM...</p>
                        <span class="message-time">10:30 AM</span>
                    </div>
                </div>

                <div class="message-item">
                    <div class="message-avatar">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="message-content">
                        <h4>BuildRight Constructions</h4>
                        <p>Materials have been delivered to the site...</p>
                        <span class="message-time">Yesterday</span>
                    </div>
                </div>

                <div class="message-item unread">
                    <div class="message-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="message-content">
                        <h4>Mohan Singh (Labourer)</h4>
                        <p>Can we discuss the tile layout pattern?</p>
                        <span class="message-time">2 days ago</span>
                    </div>
                </div>

                <div class="message-item">
                    <div class="message-avatar">
                        <i class="fas fa-user-hard-hat"></i>
                    </div>
                    <div class="message-content">
                        <h4>WaterFlow Solutions</h4>
                        <p>Payment received. Thank you!</p>
                        <span class="message-time">3 days ago</span>
                    </div>
                </div>
            </div>
            <div class="compose-message">
                <input type="text" placeholder="Type a message...">
                <button class="btn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <!-- Recent Payments -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3><i class="fas fa-rupee-sign"></i> Recent Payments</h3>
            <a href="#" class="view-all">View All</a>
        </div>
        <div class="card-body">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Description</th>
                        <th>Amount</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>15 Dec</td>
                        <td>Plumbing Work - Milestone 1</td>
                        <td>₹12,500</td>
                        <td><span class="status completed">Completed</span></td>
                    </tr>
                    <tr>
                        <td>12 Dec</td>
                        <td>Garden Landscaping - Materials</td>
                        <td>₹25,000</td>
                        <td><span class="status pending">Pending</span></td>
                    </tr>
                    <tr>
                        <td>10 Dec</td>
                        <td>Home Renovation - Advance</td>
                        <td>₹50,000</td>
                        <td><span class="status completed">Completed</span></td>
                    </tr>
                    <tr>
                        <td>05 Dec</td>
                        <td>Carpentry Work - Final</td>
                        <td>₹18,000</td>
                        <td><span class="status completed">Completed</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Available Workers -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3><i class="fas fa-users"></i> Recommended Workers</h3>
            <a href="#" class="view-all">View All</a>
        </div>
        <div class="card-body">
            <div class="workers-grid">
                <div class="worker-card">
                    <div class="worker-avatar">
                        <i class="fas fa-user-hard-hat"></i>
                    </div>
                    <div class="worker-info">
                        <h4>Ramesh Patel</h4>
                        <p>Electrician</p>
                        <div class="rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                            <span>4.5 (42 reviews)</span>
                        </div>
                        <p class="rate">₹800/day</p>
                    </div>
                    <button class="btn-sm">Hire</button>
                </div>

                <div class="worker-card">
                    <div class="worker-avatar">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="worker-info">
                        <h4>City Builders</h4>
                        <p>Construction Company</p>
                        <div class="rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <span>5.0 (128 reviews)</span>
                        </div>
                        <p class="rate">Project-based</p>
                    </div>
                    <button class="btn-sm">Contact</button>
                </div>

                <div class="worker-card">
                    <div class="worker-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="worker-info">
                        <h4>Sunita Devi</h4>
                        <p>Painter</p>
                        <div class="rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                            <span>4.0 (36 reviews)</span>
                        </div>
                        <p class="rate">₹700/day</p>
                    </div>
                    <button class="btn-sm">Hire</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="dashboard-card full-width">
    <div class="card-header">
        <h3><i class="fas fa-history"></i> Recent Activity</h3>
    </div>
    <div class="card-body">
        <div class="activity-timeline">
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="activity-content">
                    <p>Payment of ₹12,500 completed for Plumbing Work</p>
                    <span class="activity-time">Today, 10:30 AM</span>
                </div>
            </div>
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="fas fa-comment"></i>
                </div>
                <div class="activity-content">
                    <p>New message from Rajesh Kumar regarding painting schedule</p>
                    <span class="activity-time">Today, 9:15 AM</span>
                </div>
            </div>
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="fas fa-briefcase"></i>
                </div>
                <div class="activity-content">
                    <p>Project "Garden Landscaping" started</p>
                    <span class="activity-time">Yesterday, 2:00 PM</span>
                </div>
            </div>
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="activity-content">
                    <p>You rated "WaterFlow Solutions" 5 stars</p>
                    <span class="activity-time">2 days ago</span>
                </div>
            </div>
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="fas fa-plus-circle"></i>
                </div>
                <div class="activity-content">
                    <p>Posted new project "Home Renovation"</p>
                    <span class="activity-time">1 week ago</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}